; This is a configuration file for devices
; author ulno
; 
; Defines aliases, includes, dependencies, 
;   and extra code for initilization
;
;
; For the following device dev_name generate code:
; [dev_name]
; aliases = dev01 dev02
; filename = dev_dev-file (can add .h and .cpp)
; depends = other-device01 other-device02 ...
; lib = <platformio-libs to include>
; lib_esp32 = <special ib for esp32 boards>
; ; class = Overwrite_Class_Name
; extra_code = 
;   /* just a comment showing extra code */
; 
; ; code = 
; ;   /* overwrite everything between include and endif */
;
; generate this code:
; // Begin: dev_name
; #define IOTEMPOWER_COMMAND_DEV_NAME
; #include <dev-include.h>
; /* just a comment showing extra code */
; #define dev_name_(internal_name, ...) \
;     IOTEMPOWER_DEVICE_(Dev_Name, internal_name, ##__VA_ARGS__)
; #define dev01_(gcc_va_args...) dev_name_(gcc_va_args)
; #define dev02_(gcc_va_args...) dev_name_(gcc_va_args)
; #define dev_name(name, ...) IOTEMPOWER_DEVICE(name, dev_name_, ##__VA_ARGS__)
; #define dev01(gcc_va_args...) dev_name(gcc_va_args)
; #define dev02(gcc_va_args...) dev_name(gcc_va_args)
; // End: dev_name
;

[output]
aliases = out led relais
filename = dev_output

[input]
aliases = button contact
filename = dev_input

[edge_counter]
filename = dev_edge_counter

[pwm]
filename = dev_pwm

[servo]
filename = dev_emp_servo
lib_esp32 = madhephaestus/ESP32Servo@^0.13.0

[servo_switch]
filename = dev_servo_switch

[hcsr04]
aliases = ultra_sonic_distance
filename = dev_distance-hcsr04

[vl53l0x]
aliases = tof_distance
filename = dev_distance_vl53l0x

[hx711]
filename = dev_emp_hx711
lib = bogde/HX711@^0.7.5

[analog]
filename = dev_analog

[dht]
aliases = dht11
filename = dev_th
lib = https://github.com/beegee-tokyo/DHTesp

[dht22]
filename = dev_th
lib = https://github.com/beegee-tokyo/DHTesp

[ds18b20]
aliases = dallas
filename = dev_th
lib = milesburton/DallasTemperature@^3.11.0

[bmp180]
aliases = bmp085
filename = dev_barometer-bmp180
class = Barometer_BMP180
lib = seeed-studio/Grove Barometer Sensor@^2.1.0

[bmp280]
filename = dev_barometer-bmp280
class = Barometer_BMP280
lib = seeed-studio/Grove - Barometer Sensor BMP280@^1.0.1

[i2c_socket]
filename = dev_i2c_socket

[bh1750]
filename = dev_lux_bh1750
class = Lux_BH1750
lib = claws/BH1750@^1.3.0

[ts2561]
filename = dev_lux_tsl2561
lib = sparkfun/SparkFun TSL2561@^1.1.0

[rgb_single]
filename = dev_rgb_single
class = TGB_Single

[rgb_base]
filename = dev_rgb_base
code =
    /* only base class */

; FastLed based rgb strip
[rgb_strip]
filename = dev_rgb_strip
class = RGB_Strip
depends = rgb_base
lib = fastled/FastLED@^3.6.0
code = 
    #define rgb_strip_(internal_name, mqtt_name_str, led_count, ...) \
        CRGB (internal_name ## leds)[led_count]; \
        IOTEMPOWER_DEVICE_(RGB_Strip, internal_name, mqtt_name_str, led_count, \
            FastLED.addLeds< __VA_ARGS__ >((internal_name ## leds), led_count))
    #define rgb_strip(name, ...) IOTEMPOWER_DEVICE(name, rgb_strip_, ##__VA_ARGS__)


; NeoPixelBus based rgb strip
[rgb_strip_bus]
filename = dev_rgb_strip_bus
class = RGB_Strip_Bus
depends = rgb_strip
lib = makuna/NeoPixelBus@^2.7.6
extra_code = 
    #define F_RGB NeoRgbFeature
    #define F_GRB NeoGrbFeature
    #define F_BRG NeoBrgFeature
    #define F_RGBW NeoRgbwFeature
code =
    #define rgb_strip_bus_(internal_name, mqtt_name_str, led_count, color_feature, control_method, pin) \
        RGB_Strip_Bus_Template<color_feature, control_method> (internal_name ## leds)(led_count, pin); \
        IOTEMPOWER_DEVICE_(RGB_Strip_Bus, internal_name, mqtt_name_str, led_count, \
            (internal_name ## leds))
    #define rgb_strip_bus(name, ...) IOTEMPOWER_DEVICE(name, rgb_strip_bus_, ##__VA_ARGS__)


[rgb_matrix]
filename = dev_rgb_matrix
depends = rgb_strip_bus rgb_strip

; after rgb because of WAIT macro overload
[gesture_apds9960]
filename = dev_gesture-apds9960

[animator]
filename = dev_animator

[display]
filename = dev_display
depends = display44780
lib = olikraus/U8g2@^2.35.6

[display44780]
filename = dev_display
depends = display
class = Display_HD44780_I2C
lib = tonykambo/LiquidCrystal_I2C

[gyro9250]
filename = dev_gyro_mpu9250
class = Gyro_MPU9250
lib = https://github.com/iotempire/SparkFun_MPU-9250_Breakout_Arduino_Library

[gyro6050]
alias = gyro
filename = dev_gyro.h
class = Gyro_MPU6050

[mfrc522]
alias = rfid
filename = dev_mfrc522
lib = miguelbalboa/MFRC522@^1.4.10

[mpr121]
filename = dev_mpr121
lib = adafruit/Adafruit MPR121@^1.1.1

[ir_receiver]
filename = dev_ir_receiver
class = IRReceiver
lib = crankyoldgit/IRremoteESP8266@^2.8.6

[ir_sender]
filename = dev_ir_sender
class = IRSender
lib = crankyoldgit/IRremoteESP8266@^2.8.6
